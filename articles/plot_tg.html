<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>plot_tg • ThinkingGrid</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="plot_tg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ThinkingGrid</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/generate_survey_read_data.html">generate_survey_read_data</a></li>
    <li><a class="dropdown-item" href="../articles/plot_2x2.html">plot_2x2</a></li>
    <li><a class="dropdown-item" href="../articles/plot_tg.html">plot_tg</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/a-kulkarn/qualtrics-thinkgrid/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>plot_tg</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/a-kulkarn/qualtrics-thinkgrid/blob/main/vignettes/plot_tg.Rmd" class="external-link"><code>vignettes/plot_tg.Rmd</code></a></small>
      <div class="d-none name"><code>plot_tg.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://a-kulkarn.github.io/qualtrics-thinkgrid/">ThinkingGrid</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sample_data.csv"</span>, package <span class="op">=</span> <span class="st">"ThinkingGrid"</span><span class="op">)</span></span>
<span><span class="va">tg_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">data_file</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tg_data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">id</th>
<th align="left">condition</th>
<th align="right">probe</th>
<th align="right">dc</th>
<th align="right">ac</th>
<th align="right">valence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">Negative</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">1</td>
<td align="right">-1</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">Negative</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">-1</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">Negative</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">Negative</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">Negative</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">-2</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">Negative</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">-2</td>
</tr>
</tbody>
</table>
<div class="section level2">
<h2 id="overall-plots">Overall Plots<a class="anchor" aria-label="anchor" href="#overall-plots"></a>
</h2>
<p>The <code>plot_tg</code> function is used to visualize the results of
a Thinking Grid analysis. To use this function, all you need is a
dataframe containing one column that has deliberate constraints and
another containing automatic constraints. In the dataset illustrated
above, <code>dc</code> represents the deliberate constraints and
<code>ac</code> represents the automatic constraints and need to be
passed as characters to the <code>dc_column</code> and
<code>ac_column</code> parameters respectively. When using default
arguments, the <code>type</code> parameter is set to
<code>"depth"</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simple_depth</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tg.html">plot_tg</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">simple_depth</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="plot_tg_files/figure-html/basic_example1-1.png" width="768"></p>
<p>The <code>type</code> parameter can be set to one of six parameters:
<code>"cells"</code>, <code>"quadrants"</code>,
<code>"horizontal"</code>, <code>"vertical"</code>,
<code>"constraints"</code>, and <code>"depth"</code> (default).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simple_constraints</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tg.html">plot_tg</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"cells"</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">simple_constraints</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="plot_tg_files/figure-html/basic_example2-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="condition-plots">Condition plots<a class="anchor" aria-label="anchor" href="#condition-plots"></a>
</h2>
<div class="section level3">
<h3 id="separate-plots">Separate Plots<a class="anchor" aria-label="anchor" href="#separate-plots"></a>
</h3>
<p>The <code>plot_tg</code> function allows the user to plot separate
plots using a condition column present within the dataset. To use this
functionality, set the <code>proportion_type</code> argument to
<code>"condition"</code> (default is <code>"overall"</code> and will
plot the overall proportions as shown in examples above). The
<code>condition_column</code> argument needs to be populated with
character representing the column name. The number of plots created will
be equal to the number of conditions present within this column.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">condition_separate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tg.html">plot_tg</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"constraints"</span>,</span>
<span>  proportion_type <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span>,</span>
<span>  condition_column <span class="op">=</span> <span class="st">"condition"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">condition_separate</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="plot_tg_files/figure-html/condition_separate-1.png" width="768"></p>
<p>If the number of conditions is exactly equal to two, the two plots
will be plotted side by side similar to the example above. However, if
the number of conditions is greater than two, separate plots will be
returned for each condition. In the illustration below, the column
<em>valence</em> has five possible values. The code will return five
ggplot objects, one for each unique condition, which can be retrieved
using the name of that condition. We have highlighted how to retrieve
plots for valence == 0 and valence == -2.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">condition_separate2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tg.html">plot_tg</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"vertical"</span>,</span>
<span>  proportion_type <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span>,</span>
<span>  condition_column <span class="op">=</span> <span class="st">"valence"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">condition_separate2_val0</span> <span class="op">&lt;-</span> <span class="va">condition_separate2</span><span class="op">$</span><span class="va">plot</span><span class="op">$</span><span class="va">`0`</span></span>
<span><span class="va">condition_separate2_val2</span> <span class="op">&lt;-</span> <span class="va">condition_separate2</span><span class="op">$</span><span class="va">plot</span><span class="op">$</span><span class="va">`-2`</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></span><span class="op">(</span><span class="va">condition_separate2_val0</span>, <span class="va">condition_separate2_val2</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="plot_tg_files/figure-html/condition_separate2-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="difference-plots">Difference Plots<a class="anchor" aria-label="anchor" href="#difference-plots"></a>
</h3>
<p>Another way of visualizing the data is available when the number of
conditions is exactly two. If the <code>proportion_type</code> is set to
<code>"condition"</code>, the <code>comparison_type</code> parameter
could be indicated as <code>"difference"</code> (default is
<code>"separate"</code> which generates the plots above). This
visualization essentially depicts how much of a shift have people made
across the two conditions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">condition_difference</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tg.html">plot_tg</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  proportion_type <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  comparison_type <span class="op">=</span> <span class="st">"difference"</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span>,</span>
<span>  condition_column <span class="op">=</span> <span class="st">"condition"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">condition_difference</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="plot_tg_files/figure-html/condition_difference-1.png" width="768"></p>
<p>It can be the case that extreme values in the difference
distributions are sparse. For example, maybe in the example above, a
difference percentage of 4% only appears once; whereas most of the
values lie between negative two to two. In such instances, the color
palette overly emphasizes these extreme values, while compressing the
majority of data points which could potentially be of more interest.
Three parameters can be used to correct for this. First, the
<code>gradient_scaling</code> argument must be set to
<code>"enhanced"</code>. The <code>enhanced_threshold_pct</code>
controls what percentage of data must be enhanced in the color palette,
default is 50. Essentially it’s telling the code what proportion of the
data you have provided you’d like to enhance. The
<code>enhanced_expansion_factor</code> is <em>how much</em> you’d like
the selected area to be enhanced by (default=1.5). In simple terms, the
function will compress the color palette in such a way that the bottom
50% of the data will get more colors (with a factor of 1.5) enhancing
the variability of this region, making it easier for readers to pick up
minute differences.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">condition_difference2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_tg.html">plot_tg</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  proportion_type <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  comparison_type <span class="op">=</span> <span class="st">"difference"</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span>,</span>
<span>  condition_column <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  gradient_scaling <span class="op">=</span> <span class="st">"enhanced"</span>,</span>
<span>  enhanced_threshold_pct <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  enhanced_expansion_factor <span class="op">=</span> <span class="fl">2</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">condition_difference</span><span class="op">$</span><span class="va">plot</span></span></code></pre></div>
<p><img src="plot_tg_files/figure-html/condition_difference2-1.png" width="768"></p>
</div>
</div>
<div class="section level2">
<h2 id="creating-gifs">Creating GIFs<a class="anchor" aria-label="anchor" href="#creating-gifs"></a>
</h2>
<p>There might be instances where users want to visualize the
progression on the thinking grid based on a condition. In our dataframe,
we want to visualize how reports on the thinking grid change across
different levels of valence (-2 to 2). The
<code>create_tg_animation</code> function can assist with this. Similar
to the <code>plot_tg</code> function, it expects a dataframe,
<code>dc_column</code>, <code>ac_column</code>, and
<code>condition_column</code>. If condition column is numeric, it will
output the GIF by first sorting on condition in an ascending manner. In
our example, the output will start from negative two and end at two. The
file will be saved and its name can be altered using
<code>filename</code> parameter (default:
<em>tg_animation.gif</em>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_tg_animation.html">create_tg_animation</a></span><span class="op">(</span></span>
<span>  <span class="va">tg_data</span>,</span>
<span>  proportion_type <span class="op">=</span> <span class="st">"condition"</span>,</span>
<span>  dc_column <span class="op">=</span> <span class="st">"dc"</span>,</span>
<span>  ac_column <span class="op">=</span> <span class="st">"ac"</span>,</span>
<span>  condition_column <span class="op">=</span> <span class="st">"valence"</span>,</span>
<span>  filename <span class="op">=</span> <span class="st">"example_gif.gif"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Avinash Kulkarni, Vishal Kuvar, Zac Irving.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
